import{o as _,m as G,r as M,ad as ce,ah as ae,j as s,x as O,w as N,y as R,z as J,a8 as de,Q as re,p as K,q as ne,J as Q,a9 as Z,V as ee,ai as pe,v as ue,T as A,au as U,u as me,G as f,S as D,ak as se,at as he,aG as ge,aH as be,c as xe,P as fe,aI as we}from"./index-mIG69d0_.js";import{F as ke,c as Ce,E as ve,a as je,b as oe,A as ye}from"./EyeInvisibleOutlined-Dgc55MOI.js";import{a as Pe}from"./index-SPfG3NXw.js";import{F as T,I as te}from"./InputLabel-DqDwIztU.js";function Se(e){return _("PrivateSwitchBase",e)}G("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ie=e=>{const{classes:o,checked:a,disabled:n,edge:i}=e,p={root:["root",a&&"checked",n&&"disabled",i&&`edge${R(i)}`],input:["input"]};return J(p,Se,o)},ze=O(de)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:o})=>e==="start"&&o.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:o})=>e==="end"&&o.size!=="small",style:{marginRight:-12}}]}),Be=O("input",{shouldForwardProp:re})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Le=M.forwardRef(function(o,a){const{autoFocus:n,checked:i,checkedIcon:p,className:u,defaultChecked:l,disabled:w,disableFocusRipple:k=!1,edge:C=!1,icon:y,id:z,inputProps:F,inputRef:r,name:h,onBlur:m,onChange:c,onFocus:v,readOnly:P,required:g=!1,tabIndex:B,type:d,value:t,...S}=o,[L,E]=ce({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),b=ae(),H=j=>{v&&v(j),b&&b.onFocus&&b.onFocus(j)},$=j=>{m&&m(j),b&&b.onBlur&&b.onBlur(j)},I=j=>{if(j.nativeEvent.defaultPrevented)return;const Y=j.target.checked;E(Y),c&&c(j,Y)};let x=w;b&&typeof x>"u"&&(x=b.disabled);const le=d==="checkbox"||d==="radio",V={...o,checked:L,disabled:x,disableFocusRipple:k,edge:C},X=Ie(V);return s.jsxs(ze,{component:"span",className:N(X.root,u),centerRipple:!0,focusRipple:!k,disabled:x,tabIndex:null,role:void 0,onFocus:H,onBlur:$,ownerState:V,ref:a,...S,children:[s.jsx(Be,{autoFocus:n,checked:i,defaultChecked:l,className:X.input,disabled:x,id:le?z:void 0,name:h,onChange:I,readOnly:P,ref:r,required:g,ownerState:V,tabIndex:B,type:d,...d==="checkbox"&&t===void 0?{}:{value:t},...F}),L?p:y]})}),Re=K(s.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Fe=K(s.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),$e=K(s.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Me(e){return _("MuiCheckbox",e)}const W=G("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Ee=e=>{const{classes:o,indeterminate:a,color:n,size:i}=e,p={root:["root",a&&"indeterminate",`color${R(n)}`,`size${R(i)}`]},u=J(p,Me,o);return{...o,...u}},Ue=O(Le,{shouldForwardProp:e=>re(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,a.indeterminate&&o.indeterminate,o[`size${R(a.size)}`],a.color!=="default"&&o[`color${R(a.color)}`]]}})(Q(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Z(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(ee()).map(([o])=>({props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Z(e.palette[o].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(ee()).map(([o])=>({props:{color:o},style:{[`&.${W.checked}, &.${W.indeterminate}`]:{color:(e.vars||e).palette[o].main},[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),qe=s.jsx(Fe,{}),Ae=s.jsx(Re,{}),Oe=s.jsx($e,{}),Te=M.forwardRef(function(o,a){const n=ne({props:o,name:"MuiCheckbox"}),{checkedIcon:i=qe,color:p="primary",icon:u=Ae,indeterminate:l=!1,indeterminateIcon:w=Oe,inputProps:k,size:C="medium",disableRipple:y=!1,className:z,...F}=n,r=l?w:u,h=l?w:i,m={...n,disableRipple:y,color:p,indeterminate:l,size:C},c=Ee(m);return s.jsx(Ue,{type:"checkbox",inputProps:{"data-indeterminate":l,...k},icon:M.cloneElement(r,{fontSize:r.props.fontSize??C}),checkedIcon:M.cloneElement(h,{fontSize:h.props.fontSize??C}),ownerState:m,ref:a,className:N(c.root,z),disableRipple:y,...F,classes:c})});function De(e){return _("MuiFormControlLabel",e)}const q=G("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ne=e=>{const{classes:o,disabled:a,labelPlacement:n,error:i,required:p}=e,u={root:["root",a&&"disabled",`labelPlacement${R(n)}`,i&&"error",p&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",i&&"error"]};return J(u,De,o)},He=O("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[{[`& .${q.label}`]:o.label},o.root,o[`labelPlacement${R(a.labelPlacement)}`]]}})(Q(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${q.disabled}`]:{cursor:"default"},[`& .${q.label}`]:{[`&.${q.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:o})=>o==="start"||o==="top"||o==="bottom",style:{marginLeft:16}}]}))),Ve=O("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,o)=>o.asterisk})(Q(({theme:e})=>({[`&.${q.error}`]:{color:(e.vars||e).palette.error.main}}))),We=M.forwardRef(function(o,a){const n=ne({props:o,name:"MuiFormControlLabel"}),{checked:i,className:p,componentsProps:u={},control:l,disabled:w,disableTypography:k,inputRef:C,label:y,labelPlacement:z="end",name:F,onChange:r,required:h,slots:m={},slotProps:c={},value:v,...P}=n,g=ae(),B=w??l.props.disabled??(g==null?void 0:g.disabled),d=h??l.props.required,t={disabled:B,required:d};["checked","name","onChange","value","inputRef"].forEach(x=>{typeof l.props[x]>"u"&&typeof n[x]<"u"&&(t[x]=n[x])});const S=pe({props:n,muiFormControl:g,states:["error"]}),L={...n,disabled:B,labelPlacement:z,required:d,error:S.error},E=Ne(L),b={slots:m,slotProps:{...u,...c}},[H,$]=ue("typography",{elementType:A,externalForwardedProps:b,ownerState:L});let I=y;return I!=null&&I.type!==A&&!k&&(I=s.jsx(H,{component:"span",...$,className:N(E.label,$==null?void 0:$.className),children:I})),s.jsxs(He,{className:N(E.root,p),ownerState:L,ref:a,...P,children:[M.cloneElement(l,t),d?s.jsxs("div",{children:[I,s.jsxs(Ve,{ownerState:L,"aria-hidden":!0,className:E.asterisk,children:["â€‰","*"]})]}):I]})});function ie({isDemo:e=!1}){const[o,a]=U.useState(!1),[n,i]=U.useState(!1),[p,u]=U.useState(""),[l,w]=U.useState(""),[k,C]=U.useState(!1),y=me(),z=()=>{i(!n)},F=r=>{r.preventDefault()};return s.jsx(s.Fragment,{children:s.jsx(ke,{initialValues:{username:"",password:"",submit:null},validationSchema:Ce().shape({username:oe().max(255).required("Username is required"),password:oe().required("Password is required").test("no-leading-trailing-whitespace","Password cannot start or end with spaces",r=>r===r.trim()).max(64,"Password must be less than 64 characters")}),onSubmit:async(r,{setSubmitting:h})=>{var m,c,v,P,g,B;u(""),w(""),C(!0);try{const t=await Pe.post("https://sherlockwisdom.com:8080/login",{username:r.username,password:r.password});if(console.log("Login server response:",t.data),(m=t.data)!=null&&m.access_token&&((c=t.data)==null?void 0:c.status)==="logged in")localStorage.setItem("isAuthenticated","true"),localStorage.setItem("token",t.data.access_token),localStorage.setItem("username",r.username),w("Login successful! Redirecting..."),setTimeout(()=>{y("/dashboard")},1e3);else{const S=[(v=t.data)==null?void 0:v.error,(P=t.data)==null?void 0:P.details,(g=t.data)==null?void 0:g.message].filter(Boolean).join(" - ")||"Login failed: Unexpected server response";u(S),console.error("Login failed: Unexpected server response",t.data)}}catch(d){const t=(B=d.response)==null?void 0:B.data,S=[t==null?void 0:t.error,t==null?void 0:t.details,t==null?void 0:t.message,d.message].filter(Boolean).join(" - ")||"Login failed";u(S),console.error("Login error:",S,d==null?void 0:d.response)}finally{C(!1),h(!1)}},children:({errors:r,handleBlur:h,handleChange:m,touched:c,values:v,handleSubmit:P})=>s.jsx("form",{noValidate:!0,onSubmit:P,children:s.jsxs(f,{container:!0,spacing:3,children:[p&&s.jsx(f,{size:12,children:s.jsx(T,{error:!0,children:p})}),l&&s.jsx(f,{size:12,children:s.jsx(T,{children:l})}),s.jsxs(f,{size:12,children:[s.jsxs(D,{sx:{gap:1},children:[s.jsx(te,{htmlFor:"username-login",children:"Username"}),s.jsx(se,{id:"username-login",type:"text",value:v.username,name:"username",onBlur:h,onChange:m,placeholder:"Enter username",fullWidth:!0,error:!!(c.username&&r.username)})]}),c.username&&r.username&&s.jsx(T,{error:!0,id:"standard-weight-helper-text-username-login",children:r.username})]}),s.jsxs(f,{size:12,children:[s.jsxs(D,{sx:{gap:1},children:[s.jsx(te,{htmlFor:"password-login",children:"Password"}),s.jsx(se,{fullWidth:!0,error:!!(c.password&&r.password),id:"password-login",type:n?"text":"password",value:v.password,name:"password",onBlur:h,onChange:m,endAdornment:s.jsx(he,{position:"end",children:s.jsx(ge,{"aria-label":"toggle password visibility",onClick:z,onMouseDown:F,edge:"end",color:"secondary",children:n?s.jsx(ve,{}):s.jsx(je,{})})}),placeholder:"Enter password"})]}),c.password&&r.password&&s.jsx(T,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]}),s.jsx(f,{sx:{mt:-1},size:12,children:s.jsx(D,{direction:"row",sx:{gap:2,alignItems:"baseline",justifyContent:"space-between"},children:s.jsx(We,{control:s.jsx(Te,{checked:o,onChange:g=>a(g.target.checked),name:"checked",color:"primary",size:"small"}),label:s.jsx(A,{variant:"h6",children:"Keep me signed in"})})})}),s.jsx(f,{size:12,children:s.jsx(be,{children:s.jsx(xe,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:k,children:k?"Logging in...":"Login"})})})]})})})})}ie.propTypes={isDemo:fe.bool};function Qe(){return s.jsx(ye,{children:s.jsxs(f,{container:!0,spacing:3,children:[s.jsx(f,{size:12,children:s.jsxs(D,{direction:"row",sx:{alignItems:"baseline",justifyContent:"space-between",mb:{xs:-.5,sm:.5}},children:[s.jsx(A,{variant:"h3",children:"Login"}),s.jsx(A,{component:we,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Don't have an account?"})]})}),s.jsx(f,{size:12,children:s.jsx(ie,{})})]})})}export{Qe as default};
